<!DOCTYPE html>
<!-- saved from url=(0093)https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/ -->
<html class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta name="ir-site-verification-token" value="-1398349336"><link href="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/bootstrap.min.css" rel="stylesheet"><link href="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/main.css" rel="stylesheet"><script async="" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/fbevents.js.download"></script><script type="text/javascript" async="" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/js"></script><script async="" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/gtm.js.download"></script><script async="" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/analytics.js.download"></script><script>
        window.page_redirects = "http://www.learndatasci.com/python-finance-part-3-moving-average-trading-strategy/,";
    </script><link href="https://storage.googleapis.com/lds-v2-static/imgs/favicon.ico" rel="shortcut icon" type="image/png"><style>.async-hide { }</style><script>(function (a, s, y, n, c, h, i, d, e) {
        s.className += ' ' + y;
        h.start = 1 * new Date;
        h.end = i = function () {
            s.className = s.className.replace(RegExp(' ?' + y), '')
        };
        (a[n] = a[n] || []).hide = h;
        setTimeout(function () {
            i();
            h.end = null
        }, c);
        h.timeout = c;
    })(window, document.documentElement, 'async-hide', 'dataLayer', 4000,
        {'GTM-M2T2BZ4': true});</script><script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-66214322-1', 'auto');
        ga('require', 'GTM-M2T2BZ4');
        ga('send', 'pageview');
    </script><script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-TKDFRWD');</script><title>Python for Finance, Part 3: Moving Average Trading Strategy – LearnDataSci</title><meta content="" name="description"><script async="" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/jarallax.min.js.download"></script><link async="" href="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/qab0yhk.css" rel="stylesheet"><meta name="twitter:card" value="summary"><meta content="Python for Finance, Part 3: Moving Average Trading Strategy" property="og:title"><meta content="article" property="og:type"><meta content="http://learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/" property="og:url"><meta content="https://storage.googleapis.com/lds-media/images/python-for-finance-part-3.width-745.jpg" property="og:image"><script src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/embed.js.download" data-timestamp="1602261890909"></script><style>._3emE9--dark-theme .-S-tR--ff-downloader{background:rgba(30,30,30,.93);border:1px solid rgba(82,82,82,.54);box-shadow:0 4px 7px rgba(30,30,30,.55);color:#fff}._3emE9--dark-theme .-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn{background:#3d4b52}._3emE9--dark-theme .-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn:hover{background:#131415}._3emE9--dark-theme .-S-tR--ff-downloader ._10vpG--footer{background:rgba(30,30,30,.93)}._2mDEx--white-theme .-S-tR--ff-downloader{background:#fff;border:1px solid rgba(82,82,82,.54);box-shadow:0 4px 7px rgba(30,30,30,.55);color:#314c75}._2mDEx--white-theme .-S-tR--ff-downloader ._6_Mtt--header{font-weight:700}._2mDEx--white-theme .-S-tR--ff-downloader ._2dFLA--container ._2bWNS--notice{border:0;color:rgba(0,0,0,.88)}._2mDEx--white-theme .-S-tR--ff-downloader ._10vpG--footer{background:#fff}.-S-tR--ff-downloader{display:block;overflow:hidden;position:fixed;bottom:20px;right:7.1%;width:330px;height:180px;background:rgba(30,30,30,.93);border-radius:2px;color:#fff;z-index:99999999;border:1px solid rgba(82,82,82,.54);box-shadow:0 4px 7px rgba(30,30,30,.55);transition:.5s}.-S-tR--ff-downloader._3M7UQ--minimize{height:62px}.-S-tR--ff-downloader._3M7UQ--minimize .nxuu4--file-info,.-S-tR--ff-downloader._3M7UQ--minimize ._6_Mtt--header{display:none}.-S-tR--ff-downloader ._6_Mtt--header{padding:10px;font-size:17px;font-family:sans-serif}.-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn{float:right;background:#f1ecec;height:20px;width:20px;text-align:center;padding:2px;margin-top:-10px;cursor:pointer}.-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn:hover{background:#e2dede}.-S-tR--ff-downloader ._13XQ2--error{color:red;padding:10px;font-size:12px;line-height:19px}.-S-tR--ff-downloader ._2dFLA--container{position:relative;height:100%}.-S-tR--ff-downloader ._2dFLA--container .nxuu4--file-info{padding:6px 15px 0;font-family:sans-serif}.-S-tR--ff-downloader ._2dFLA--container .nxuu4--file-info div{margin-bottom:5px;width:100%;overflow:hidden}.-S-tR--ff-downloader ._2dFLA--container ._2bWNS--notice{margin-top:21px;font-size:11px}.-S-tR--ff-downloader ._10vpG--footer{width:100%;bottom:0;position:absolute;font-weight:700}.-S-tR--ff-downloader ._10vpG--footer ._2V73d--loader{-webkit-animation:n0BD1--rotation 3.5s linear forwards;animation:n0BD1--rotation 3.5s linear forwards;position:absolute;top:-120px;left:calc(50% - 35px);border-radius:50%;border:5px solid #fff;border-top-color:#a29bfe;height:70px;width:70px;display:flex;justify-content:center;align-items:center}.-S-tR--ff-downloader ._10vpG--footer ._24wjw--loading-bar{width:100%;height:18px;background:#dfe6e9;border-radius:5px}.-S-tR--ff-downloader ._10vpG--footer ._24wjw--loading-bar ._1FVu9--progress-bar{height:100%;background:#8bc34a;border-radius:5px}.-S-tR--ff-downloader ._10vpG--footer ._2KztS--status{margin-top:10px}.-S-tR--ff-downloader ._10vpG--footer ._2KztS--status ._1XilH--state{float:left;font-size:.9em;letter-spacing:1pt;text-transform:uppercase;width:100px;height:20px;position:relative}.-S-tR--ff-downloader ._10vpG--footer ._2KztS--status ._1jiaj--percentage{float:right}</style><link rel="stylesheet" type="text/css" href="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/prettify.css"><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.d70637fa1c39d358d2553bf476f09a98.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.63145499704f9a276b6c681c79021303.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.a45eea237b8ac398e54e1765ef73d9da.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.1') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/alfalfalfa.0823c767a3bc925f628afd9bed26c958.js.download" async="" charset="UTF-8"></script></head><body class="template-blogpage template-blog-page"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div><div class="wrapper"><div class="navbar navbar-fixed-top stuck" role="navigation"><div class="fluid-container"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><a class="navbar-brand" data-placement="bottom" href="https://www.learndatasci.com/" title="Learn Data Science - Tutorials, Books, Courses, and More"><svg class="primary-logo" height="65" viewBox="0 0 239 65" width="239" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1 { fill: #edbd17; } .cls-1, .cls-2, .cls-3 { fill-rule: evenodd; } .cls-2 { fill: #851836; } .cls-3 { fill: #cacaca; }</style></defs><path class="cls-1" d="M63.606,64V48.5H47.954V64H63.606ZM32.3,64V2H1V64H32.3Z" id="L"></path><path class="cls-2" d="M135.019,63.988v-51H151.1v51H135.019Zm-48.257,0v-62h32.171v62H86.762Z" id="D"></path><path class="cls-3" d="M190.069,64V48.5H174.418V64h15.651Zm46.954,0V33h-31.3V64h31.3Zm-31.3-31V2h-31.3V33h31.3Zm31.3-15.5V2H221.372V17.5h15.651Z" id="S"></path></svg></a></div><div class="navbar-collapse collapse pull-right"><ul class="nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#">Learning <b class="caret"><svg height="100%" id="arrow-down" viewBox="0 0 32 32" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M31.296 7.68c-.256-.32-.704-.512-1.216-.512-.448 0-.896.192-1.216.512L16 20.736 3.2 7.68c-.256-.32-.704-.512-1.216-.512-.448 0-.896.192-1.216.448S.256 8.32.256 8.768c0 .512.192.96.512 1.28L14.72 24.32c.32.32.704.512 1.152.512.256 0 .512-.064.768-.192.128-.064.256-.128.384-.128l.128-.064 14.016-14.336c.768-.64.704-1.728.128-2.432z"></path></svg></b></a><ul class="dropdown-menu"><li><a href="https://www.learndatasci.com/tutorials/">Tutorials</a></li><li><a href="https://www.learndatasci.com/articles/">Articles</a></li></ul></li><li class=""><a href="https://www.learndatasci.com/books/">Books</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#">Courses <b class="caret"><svg height="100%" id="arrow-down" viewBox="0 0 32 32" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M31.296 7.68c-.256-.32-.704-.512-1.216-.512-.448 0-.896.192-1.216.512L16 20.736 3.2 7.68c-.256-.32-.704-.512-1.216-.512-.448 0-.896.192-1.216.448S.256 8.32.256 8.768c0 .512.192.96.512 1.28L14.72 24.32c.32.32.704.512 1.152.512.256 0 .512-.064.768-.192.128-.064.256-.128.384-.128l.128-.064 14.016-14.336c.768-.64.704-1.728.128-2.432z"></path></svg></b></a><ul class="dropdown-menu"><li><a href="https://www.learndatasci.com/best-data-science-online-courses/">Data Science</a></li><li><a href="https://www.learndatasci.com/best-machine-learning-courses/">Machine Learning</a></li></ul></li><li class=""><a href="https://www.learndatasci.com/team/">Team</a></li><li class="social-menu-icons"><a alt="GitHub" href="https://github.com/LearnDataSci"><img src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/github-ico.svg" width="30"><span>295</span></a></li><li class="social-menu-icons"><a alt="Twitter" href="http://twitter.com/learndatasci"><img src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/twitter_Gvy5lp8.svg" width="30"><span>2.6K</span></a></li></ul></div></div></div><div class="header-content fluid-container"></div><div class="container-fluid" style="padding-top: 100px;"><div class="blog-category-tag"><span>You are reading <b><a href="https://www.learndatasci.com/tutorials">tutorials</a></b></span></div><article class="article-content"><div class="social-sidebar pull-left waypoint"><div class="share sticky stickified" style="visibility: visible; position: fixed; height: calc(100% - 64px); top: 64px;"><div class="ttl-shares"><span class="dynamic-share">85</span><span class="share-info">SHARES</span></div><a class="st_linkedin_large icon-linkedin2" displaytext="LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.learndatasci.com%2Ftutorials%2Fpython-finance-part-3-moving-average-trading-strategy%2F&amp;summary=Python%20for%20Finance,%20Part%203:%20Moving%20Average%20Trading%20Strategy" st_title="Python for Finance, Part 3: Moving Average Trading Strategy" st_url="/tutorials/python-finance-part-3-moving-average-trading-strategy/"></a> <a class="st_twitter_large icon-twitter" displaytext="Tweet" href="http://twitter.com/share?text=Python%20for%20Finance,%20Part%203:%20Moving%20Average%20Trading%20Strategy&amp;url=https%3A%2F%2Fwww.learndatasci.com%2Ftutorials%2Fpython-finance-part-3-moving-average-trading-strategy%2F" st_title="Python for Finance, Part 3: Moving Average Trading Strategy" st_url="/tutorials/python-finance-part-3-moving-average-trading-strategy/"></a> <a class="st_facebook_large icon-facebook" displaytext="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.learndatasci.com%2Ftutorials%2Fpython-finance-part-3-moving-average-trading-strategy%2F" st_title="Python for Finance, Part 3: Moving Average Trading Strategy" st_url="/tutorials/python-finance-part-3-moving-average-trading-strategy/"></a><a class="st_email_large icon-reddit" displaytext="Email" href="http://www.reddit.com/submit?url=https%3A%2F%2Fwww.learndatasci.com%2Ftutorials%2Fpython-finance-part-3-moving-average-trading-strategy%2F&amp;title=Python%20for%20Finance,%20Part%203:%20Moving%20Average%20Trading%20Strategy" st_title="Python for Finance, Part 3: Moving Average Trading Strategy" st_url="/tutorials/python-finance-part-3-moving-average-trading-strategy/"></a> <a class="st_sharethis_large icon-hackernews" displaytext="ShareThis" href="https://news.ycombinator.com/submitlink?uhttps%3A%2F%2Fwww.learndatasci.com%2Ftutorials%2Fpython-finance-part-3-moving-average-trading-strategy%2F&amp;t=LearnDataSci" st_title="Python for Finance, Part 3: Moving Average Trading Strategy" st_url="/tutorials/python-finance-part-3-moving-average-trading-strategy/"></a></div></div><div class="article-content-wrapper"><div class="index-content clearfix"><div class="main-container"><div class="article-header-photo"><img alt="Python for Finance part 3" height="160" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/python-for-finance-part-3.2e16d0ba.fill-800x160.jpg" width="800"></div><div class="meta-wrap"><div class="meta author"><img alt="Georgios_Efstathopoulos.png" height="160" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/Georgios_Efstathopoulos.width-150.png" width="150"><div class="r-side"><span><b>Author:</b> <a href="https://www.learndatasci.com/author/georgios">Georgios Efstathopoulos</a></span><br> <b>Quantitative Analyst</b></div></div><div class="tags" id="Tags"></div></div><h1 style="color:#e2c03b;">Python for Finance, Part 3: Moving Average Trading Strategy</h1><div class="intro"><p>Expanding on the previous article, we'll be looking at how to incorporate recent price behaviors into our strategy</p></div><div class="index-wrapper-mobi"><div id="IndexNavMobi"><h4>Contents Index</h4><ul><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#MovAveCons">Moving Average Considerations</a></li><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#MoveAveTradStrat">A Moving Average Trading Strategy</a></li><li class="index-H3"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#FinalCaveat">One Final Caveat</a></li><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#ReturnOfStrat">What is the Total Return of the Strategy?</a></li><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#WhatNext">What Next?</a></li><li class="index-H3"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#StratBetter">Which Strategy is Better?</a></li></ul></div></div><section><div class="paragraph read-friendly"><div class="rich-text"><p>In the previous article of this series, we continued to discuss general concepts which are fundamental to the design and backtesting of any <a href="https://www.learndatasci.com/tutorials/python-finance-part-2-intro-quantitative-trading-strategies/">quantitative trading strategy</a>. In detail, we have discussed about</p><p></p><ol><li>relative and log-returns, their properties, differences and how to use each one,</li><li>a generic representation of a trading strategy using the normalised asset weights <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 2.631em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.334em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.24em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="msubsup" id="MathJax-Span-3"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-5" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-6" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-7" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-9" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1">w_i\left(t\right)</script> for a set of <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-10" style="width: 1.094em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.945em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1000.95em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-11"><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">N</script></li></ol><p>tradable assets and</p><ol><li>a very simple, yet profitable strategy, the way to represent it and how to calculate its total return.</li></ol><p></p><p>If you just found this article, see <a href="https://www.learndatasci.com/tutorials/python-finance-part-yahoo-finance-api-pandas-matplotlib/">Part</a> 1 and <a href="https://www.learndatasci.com/tutorials/python-finance-part-2-intro-quantitative-trading-strategies/">Part 2</a>.</p></div></div></section><section><div class="help-blocks row prereq-style"><div class="col-md-2 text-center"><div class="bulb-wrap"><img src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/lightbulb-brain.svg" style="width:40px; max-width:100%;"></div></div><div class="col-md-10"><h3>You should already know:</h3><div class="rich-text"><p></p><ul><li>Python fundamentals</li><li>Pandas and Matplotlib</li><li>Mathematical notation</li></ul><p>Learn Python and the libraries interactively through <a href="https://www.learndatasci.com/out/dataquest/">dataquest.io</a></p></div></div></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>In this article, we will start designing a more complex trading strategy, which will have non-constant weights <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-13" style="width: 2.631em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.334em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.24em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-14"><span class="msubsup" id="MathJax-Span-15"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-17" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-18" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-3">w_i\left(t\right)</script>, and thus adapt in some way to the recent behaviour of the price of our assets.</p><p></p><p>We will again assume we have a universe of just 3 tradable assets, the Apple and Microsoft stocks (with tickers <b>AAPL</b> and <b>MSFT</b> respectively) and the S&amp;P 500 Index (ticker <b>^GSPC</b>).</p><p></p><p>As a reminder, the dataframe containing the three "cleaned" price timeseries has the following format:</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="kwd">import</span><span class="pln"> pandas </span><span class="kwd">as</span><span class="pln"> pd
</span><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np
</span><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">pyplot </span><span class="kwd">as</span><span class="pln"> plt
</span><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">dates </span><span class="kwd">as</span><span class="pln"> mdates
</span><span class="pun">%</span><span class="pln">matplotlib inline
</span><span class="kwd">import</span><span class="pln"> seaborn </span><span class="kwd">as</span><span class="pln"> sns
sns</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="pln">style</span><span class="pun">=</span><span class="str">'darkgrid'</span><span class="pun">,</span><span class="pln"> context</span><span class="pun">=</span><span class="str">'talk'</span><span class="pun">,</span><span class="pln"> palette</span><span class="pun">=</span><span class="str">'Dark2'</span><span class="pun">)</span><span class="pln">

my_year_month_fmt </span><span class="pun">=</span><span class="pln"> mdates</span><span class="pun">.</span><span class="typ">DateFormatter</span><span class="pun">(</span><span class="str">'%m/%y'</span><span class="pun">)</span><span class="pln">

data </span><span class="pun">=</span><span class="pln"> pd</span><span class="pun">.</span><span class="pln">read_pickle</span><span class="pun">(</span><span class="str">'./data.pkl'</span><span class="pun">)</span><span class="pln">
data</span><span class="pun">.</span><span class="pln">head</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2000-01-03</th><td>3.625643</td><td>39.334630</td><td>1455.219971</td></tr><tr><th>2000-01-04</th><td>3.319964</td><td>38.005900</td><td>1399.420044</td></tr><tr><th>2000-01-05</th><td>3.368548</td><td>38.406628</td><td>1402.109985</td></tr><tr><th>2000-01-06</th><td>3.077039</td><td>37.120080</td><td>1403.449951</td></tr><tr><th>2000-01-07</th><td>3.222794</td><td>37.605172</td><td>1441.469971</td></tr><tr><th>2000-01-10</th><td>3.166112</td><td>37.879354</td><td>1457.599976</td></tr><tr><th>2000-01-11</th><td>3.004162</td><td>36.909170</td><td>1438.560059</td></tr><tr><th>2000-01-12</th><td>2.823993</td><td>35.706986</td><td>1432.250000</td></tr><tr><th>2000-01-13</th><td>3.133722</td><td>36.381897</td><td>1449.680054</td></tr><tr><th>2000-01-14</th><td>3.253159</td><td>37.879354</td><td>1465.150024</td></tr></tbody></table></section><section><div class="headers read-friendly"><h2 id="MovAveCons">Moving Average Considerations</h2></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>One of the oldest and simplest trading strategies that exist is the one that uses a moving average of the price (or returns) timeseries to proxy the recent trend of the price.</p><p></p><p>The idea is quite simple, yet powerful; if we use a (say) 100-day moving average of our price time-series, then a significant portion of the daily price noise will have been "averaged-out". Thus, we can can observe more closely the longer-term behaviour of the asset.</p><p></p><p>Let us, again, calculate the rolling *simple moving averages (SMA)* of these three timeseries as follows. Remember, again, that when calculating the <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-22" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1001.04em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-23"><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">M</script> days SMA, the first <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-25" style="width: 3.127em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.78em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1002.73em, 2.433em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-26"><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span><span class="mo" id="MathJax-Span-28" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-29" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.164em; border-left: 0px solid; width: 0px; height: 0.947em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-5">M-1</script> are not valid, as <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-30" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1001.04em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-31"><span class="mi" id="MathJax-Span-32" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi></math></span></span><script type="math/tex" id="MathJax-Element-6">M</script> prices are required for the first moving average data point.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Calculating the short-window simple moving average</span><span class="pln">
short_rolling </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">rolling</span><span class="pun">(</span><span class="pln">window</span><span class="pun">=</span><span class="lit">20</span><span class="pun">).</span><span class="pln">mean</span><span class="pun">()</span><span class="pln">
short_rolling</span><span class="pun">.</span><span class="pln">head</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2000-01-03</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-04</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-05</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-06</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-07</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-10</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-11</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-12</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-13</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-14</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-17</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-18</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-19</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-20</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-21</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-24</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-25</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-26</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-27</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-28</th><td>3.342434</td><td>36.389278</td><td>1429.120007</td></tr></tbody></table></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Calculating the long-window simple moving average</span><span class="pln">
long_rolling </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">rolling</span><span class="pun">(</span><span class="pln">window</span><span class="pun">=</span><span class="lit">100</span><span class="pun">).</span><span class="pln">mean</span><span class="pun">()</span><span class="pln">
long_rolling</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">()</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2016-12-26</th><td>110.958205</td><td>58.418182</td><td>2176.628791</td></tr><tr><th>2016-12-27</th><td>111.047874</td><td>58.476117</td><td>2177.500190</td></tr><tr><th>2016-12-28</th><td>111.140589</td><td>58.532936</td><td>2178.244490</td></tr><tr><th>2016-12-29</th><td>111.233698</td><td>58.586112</td><td>2178.879189</td></tr><tr><th>2016-12-30</th><td>111.315270</td><td>58.635267</td><td>2179.426990</td></tr></tbody></table></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Let us plot the last 22 years for these three timeseries for Microsoft stock, to get a feeling about how these behave.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="pln">start_date </span><span class="pun">=</span><span class="pln"> </span><span class="str">'2015-01-01'</span><span class="pln">
end_date </span><span class="pun">=</span><span class="pln"> </span><span class="str">'2016-12-31'</span><span class="pln">

fig</span><span class="pun">,</span><span class="pln"> ax </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">subplots</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">16</span><span class="pun">,</span><span class="lit">9</span><span class="pun">))</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'Price'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">long_rolling</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> long_rolling</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label </span><span class="pun">=</span><span class="pln"> </span><span class="str">'100-days SMA'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">short_rolling</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> short_rolling</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label </span><span class="pun">=</span><span class="pln"> </span><span class="str">'20-days SMA'</span><span class="pun">)</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Price in $'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><div class="output-image"><div class="out-tag">RESULT:</div><figure class="output-images"><div class="attributed-wrap"><img alt="MSFT 100 and 20 Day Moving Average" class="img-responsive" height="524" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/msft_100_and_20_day_rolling_average_2.width-1200.png" width="948"></div></figure></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>It is straightforward to observe that SMA timeseries are much less noisy than the original price timeseries. However, this comes at a cost: SMA timeseries lag the original price timeseries, which means that changes in the trend are only seen with a delay (lag) of <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-33" style="width: 0.796em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.697em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1000.65em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-34"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math-italic;">L</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">L</script> days.</p><p></p><p>How much is this lag <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-36" style="width: 0.796em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.697em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1000.65em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-37"><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Math-italic;">L</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">L</script>? For a SMA moving average calculated using <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-39" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1001.04em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-40"><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">M</script> days, the lag is roughly <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mfrac&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-42" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1001.04em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-43"><span class="mfrac" id="MathJax-Span-44"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.375em, 1000.75em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.345em;"><span class="mi" id="MathJax-Span-45" style="font-size: 70.7%; font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.052em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-46" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.85em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.846em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mi>M</mi><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-10">\frac{M}{2}</script> days. Thus, if we are using a <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;100&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-47" style="width: 1.689em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.491em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1001.44em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-48"><span class="mn" id="MathJax-Span-49" style="font-family: MathJax_Main;">100</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>100</mn></math></span></span><script type="math/tex" id="MathJax-Element-11">100</script> days SMA, this means we may be late by almost <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;50&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-50" style="width: 1.143em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.95em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-51"><span class="mn" id="MathJax-Span-52" style="font-family: MathJax_Main;">50</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>50</mn></math></span></span><script type="math/tex" id="MathJax-Element-12">50</script> days, which can significantly affect our strategy.</p><p></p><p>One way to reduce the lag induced by the use of the SMA is to use the so-called Exponential Moving Average (EMA), defined as</p><p></p><p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mtext&gt;EMA&lt;/mtext&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mtext&gt;EMA&lt;/mtext&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mtext&gt;&amp;#xA0;&lt;/mtext&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mtext&gt;EMA&lt;/mtext&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-53" style="width: 20.34em; display: inline-block;"><span style="display: inline-block; position: relative; width: 18.157em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(0.598em, 1017.91em, 3.276em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-54"><span class="mtable" id="MathJax-Span-55" style="padding-right: 0.151em; padding-left: 0.151em;"><span style="display: inline-block; position: relative; width: 17.86em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000em, 4.864em, -999.998em); top: -4.015em; left: 0em;"><span style="display: inline-block; position: relative; width: 0em; height: 0px;"><span style="position: absolute; clip: rect(3.872em, 1000em, 4.169em, -999.998em); top: -4.66em; right: 0em;"><span class="mtd" id="MathJax-Span-56"><span class="mrow" id="MathJax-Span-57"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.872em, 1000em, 4.169em, -999.998em); top: -3.321em; right: 0em;"><span class="mtd" id="MathJax-Span-92"><span class="mrow" id="MathJax-Span-93"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(2.483em, 1003.97em, 5.112em, -999.998em); top: -4.015em; left: 0em;"><span style="display: inline-block; position: relative; width: 4.07em; height: 0px;"><span style="position: absolute; clip: rect(3.127em, 1003.52em, 4.417em, -999.998em); top: -4.66em; left: 0em;"><span class="mtd" id="MathJax-Span-58"><span class="mrow" id="MathJax-Span-59"><span class="mtext" id="MathJax-Span-60" style="font-family: MathJax_Main;">EMA</span><span class="mrow" id="MathJax-Span-61" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-62" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-63" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-64" style="font-family: MathJax_Main;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.127em, 1003.97em, 4.417em, -999.998em); top: -3.321em; left: 0em;"><span class="mtd" id="MathJax-Span-94"><span class="mrow" id="MathJax-Span-95"><span class="mtext" id="MathJax-Span-96" style="font-family: MathJax_Main;">EMA</span><span class="mrow" id="MathJax-Span-97" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-98" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-99"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mn" id="MathJax-Span-101" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-102" style="font-family: MathJax_Main;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(2.483em, 1013.69em, 5.112em, -999.998em); top: -4.015em; left: 4.07em;"><span style="display: inline-block; position: relative; width: 13.792em; height: 0px;"><span style="position: absolute; clip: rect(3.127em, 1013.69em, 4.417em, -999.998em); top: -4.66em; left: 0em;"><span class="mtd" id="MathJax-Span-65"><span class="mrow" id="MathJax-Span-66"><span class="mi" id="MathJax-Span-67"></span><span class="mo" id="MathJax-Span-68" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mrow" id="MathJax-Span-69" style="padding-left: 0.3em;"><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main;">(</span><span class="mrow" id="MathJax-Span-71"><span class="mn" id="MathJax-Span-72" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Math-italic; padding-left: 0.201em;">α</span></span><span class="mo" id="MathJax-Span-75" style="font-family: MathJax_Main;">)</span></span><span class="mtext" id="MathJax-Span-76" style="font-family: MathJax_Main; padding-left: 0.151em;">EMA</span><span class="mrow" id="MathJax-Span-77" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-78" style="font-family: MathJax_Main;">(</span><span class="mrow" id="MathJax-Span-79"><span class="mi" id="MathJax-Span-80" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-81" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-82" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span class="mo" id="MathJax-Span-83" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-84" style="font-family: MathJax_Main; padding-left: 0.201em;">+</span><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math-italic; padding-left: 0.201em;">α</span><span class="mtext" id="MathJax-Span-86" style="font-family: MathJax_Main;">&nbsp;</span><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-88" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-90" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-91" style="font-family: MathJax_Main;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.127em, 1003.52em, 4.417em, -999.998em); top: -3.321em; left: 0em;"><span class="mtd" id="MathJax-Span-103"><span class="mrow" id="MathJax-Span-104"><span class="mi" id="MathJax-Span-105"></span><span class="mo" id="MathJax-Span-106" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math-italic; padding-left: 0.3em;">p</span><span class="mrow" id="MathJax-Span-108" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-109" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-110"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mn" id="MathJax-Span-112" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-113" style="font-family: MathJax_Main;">)</span></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.108em; border-left: 0px solid; width: 0px; height: 2.781em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left" rowspacing="3pt" columnspacing="0em" displaystyle="true"><mtr><mtd></mtd><mtd><mtext>EMA</mtext><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>(</mo><mrow><mn>1</mn><mo>−</mo><mi>α</mi></mrow><mo>)</mo></mrow><mtext>EMA</mtext><mrow><mo>(</mo><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><mo>)</mo></mrow><mo>+</mo><mi>α</mi><mtext>&nbsp;</mtext><mi>p</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mtext>EMA</mtext><mrow><mo>(</mo><msub><mi>t</mi><mn>0</mn></msub><mo>)</mo></mrow></mtd><mtd><mi></mi><mo>=</mo><mi>p</mi><mrow><mo>(</mo><msub><mi>t</mi><mn>0</mn></msub><mo>)</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-13">\begin{equation} \begin{split} & \text{EMA}\left(t\right) & = \left(1-\alpha\right)\text{EMA}\left(t-1\right) + \alpha \ p\left(t\right) \\ & \text{EMA}\left(t_0\right) & = p\left(t_0\right) \end{split} \end{equation}</script></p><p></p><p>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-114" style="width: 2.036em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.788em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.69em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-115"><span class="mi" id="MathJax-Span-116" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-117" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-118" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-119" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-120" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-14">p\left(t\right)</script> is the price at time <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-121" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-122"><span class="mi" id="MathJax-Span-123" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.836em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-15">t</script> and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-124" style="width: 0.747em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.647em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.59em, 1000.6em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-125"><span class="mi" id="MathJax-Span-126" style="font-family: MathJax_Math-italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.614em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-16">\alpha</script> is called the decay parameter for the EMA. <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-127" style="width: 0.747em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.647em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.59em, 1000.6em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-128"><span class="mi" id="MathJax-Span-129" style="font-family: MathJax_Math-italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.614em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-17">\alpha</script> is related to the lag as <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-130" style="width: 5.31em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.715em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(0.697em, 1004.72em, 3.078em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-131"><span class="mi" id="MathJax-Span-132" style="font-family: MathJax_Math-italic;">α</span><span class="mo" id="MathJax-Span-133" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mfrac" id="MathJax-Span-134" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 2.483em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.227em, 1000.45em, 4.169em, -999.998em); top: -4.71em; left: 50%; margin-left: -0.246em;"><span class="mn" id="MathJax-Span-135" style="font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.177em, 1002.28em, 4.268em, -999.998em); top: -3.321em; left: 50%; margin-left: -1.188em;"><span class="mrow" id="MathJax-Span-136"><span class="mi" id="MathJax-Span-137" style="font-family: MathJax_Math-italic;">L</span><span class="mo" id="MathJax-Span-138" style="font-family: MathJax_Main; padding-left: 0.201em;">+</span><span class="mn" id="MathJax-Span-139" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1002.48em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.483em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.886em; border-left: 0px solid; width: 0px; height: 2.503em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>α</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>L</mi><mo>+</mo><mn>1</mn></mrow></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-18"> \alpha = \frac{1}{L + 1}</script> and the length of the window (span) <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-140" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.342em, 1001.04em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-141"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi></math></span></span><script type="math/tex" id="MathJax-Element-19">M</script> as <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-143" style="width: 5.608em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.012em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(0.697em, 1005.01em, 3.078em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-144"><span class="mi" id="MathJax-Span-145" style="font-family: MathJax_Math-italic;">α</span><span class="mo" id="MathJax-Span-146" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mfrac" id="MathJax-Span-147" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 2.83em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.227em, 1000.45em, 4.169em, -999.998em); top: -4.71em; left: 50%; margin-left: -0.246em;"><span class="mn" id="MathJax-Span-148" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.177em, 1002.68em, 4.268em, -999.998em); top: -3.321em; left: 50%; margin-left: -1.386em;"><span class="mrow" id="MathJax-Span-149"><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span><span class="mo" id="MathJax-Span-151" style="font-family: MathJax_Main; padding-left: 0.201em;">+</span><span class="mn" id="MathJax-Span-152" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1002.83em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.83em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.886em; border-left: 0px solid; width: 0px; height: 2.503em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>α</mi><mo>=</mo><mfrac><mn>2</mn><mrow><mi>M</mi><mo>+</mo><mn>1</mn></mrow></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-20"> \alpha = \frac{2}{M + 1}</script>.</p><p></p><p>The reason why EMA reduces the lag is that it puts more weight on more recent observations, whereas the SMA weights all observations equally by <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-153" style="width: 1.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1001.04em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-154"><span class="mfrac" id="MathJax-Span-155"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-156" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.375em, 1000.75em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.345em;"><span class="mi" id="MathJax-Span-157" style="font-size: 70.7%; font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.052em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.85em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.846em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><mi>M</mi></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-21">\frac{1}{M}</script>. Using Pandas, calculating the exponential moving average is easy. We need to provide a lag value, from which the decay parameter <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-158" style="width: 0.747em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.647em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.59em, 1000.6em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-159"><span class="mi" id="MathJax-Span-160" style="font-family: MathJax_Math-italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.614em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-22">\alpha</script> is automatically calculated. To be able to compare with the short-time SMA we will use a span value of <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;20&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-161" style="width: 1.143em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.95em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-162"><span class="mn" id="MathJax-Span-163" style="font-family: MathJax_Main;">20</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>20</mn></math></span></span><script type="math/tex" id="MathJax-Element-23">20</script>.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Using Pandas to calculate a 20-days span EMA. adjust=False specifies that we are interested in the recursive calculation mode.</span><span class="pln">
ema_short </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">ewm</span><span class="pun">(</span><span class="pln">span</span><span class="pun">=</span><span class="lit">20</span><span class="pun">,</span><span class="pln"> adjust</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">).</span><span class="pln">mean</span><span class="pun">()</span><span class="pln">

fig</span><span class="pun">,</span><span class="pln"> ax </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">subplots</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">15</span><span class="pun">,</span><span class="lit">9</span><span class="pun">))</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'Price'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">ema_short</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> ema_short</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Span 20-days EMA'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">short_rolling</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> short_rolling</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label </span><span class="pun">=</span><span class="pln"> </span><span class="str">'20-days SMA'</span><span class="pun">)</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Price in $'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><div class="output-image"><div class="out-tag">RESULT:</div><figure class="output-images"><div class="attributed-wrap"><img alt="MSFT 100 and 20 Day EMA" class="img-responsive" height="524" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/msft_100_and_20_day_ema.width-1200.png" width="892"></div></figure></div></section><section><div class="row simple-ad-block" id="CTACourses2018" style="
    background-color: #000000;
    padding: 25px;
    color: white;
    /* font-weight: bold; */
    font-size: 25px;
    padding-bottom: 26px;
    "><div class="col-lg-8"><h6 style="
    font-size: 16px;
    letter-spacing: 1.2px;
    margin-bottom: 3px;
    margin-top: 3px;
    ">Want to learn more?</h6><b>See Best Data Science Courses of 2019</b></div><div class="col-lg-4"><a class="btn" href="https://www.learndatasci.com/best-data-science-online-courses?utm_source=Python%20for%20Finance%20Part%203%20Article&amp;utm_medium=html%20block&amp;utm_campaign=best%20data%20science%20courses%20page&amp;utm_content=See%20Best%20Data%20Science%20Courses%20of%202019" style="
    background-color: #e8ad00;
    float: right;
    margin-top: 9px;
    min-width: 136px;
    text-align: center;
">View</a></div></div><style>@media(max-width:1199px){ .simple-ad-block .r-side{ } .simple-ad-block a{ float:none !important; } }</style></section><section><div class="headers read-friendly"><h2 id="MoveAveTradStrat">A Moving Average Trading Strategy</h2></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Let us attempt to use the moving averages calculated above to design a trading strategy. Our first attempt is going to be relatively straghtforward and is going to take advantage of the fact that a moving average timeseries (whether SMA or EMA) lags the actual price behaviour.</p><p></p><p>Bearing this in mind, it is natural to assume that when a change in the long term behaviour of the asset occurs, the actual price timeseries will react faster than the EMA one. Therefore, we will consider the crossing of the two as potential trading signals.</p><p></p><ol><li>When the price timeseries <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-164" style="width: 2.036em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.788em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.69em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-165"><span class="mi" id="MathJax-Span-166" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-167" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-168" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-169" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-170" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-24">p\left(t\right)</script> crosses the EMA timeseries <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-171" style="width: 2.036em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.788em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.69em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-172"><span class="mi" id="MathJax-Span-173" style="font-family: MathJax_Math-italic;">e</span><span class="mrow" id="MathJax-Span-174" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-175" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-176" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-177" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-25">e\left(t\right)</script> from below, we will close any existing short position and go long (buy) one unit of the asset.<br></li><li>When the price timeseries <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-178" style="width: 2.036em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.788em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.69em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-179"><span class="mi" id="MathJax-Span-180" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-181" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-182" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-183" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-184" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-26">p\left(t\right)</script> crosses the EMA timeseries <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-185" style="width: 2.036em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.788em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.69em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-186"><span class="mi" id="MathJax-Span-187" style="font-family: MathJax_Math-italic;">e</span><span class="mrow" id="MathJax-Span-188" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-189" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-190" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-191" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-27">e\left(t\right)</script> from above, we will close any existing long position and go short (sell) one unit of the asset.</li></ol></div></div></section><section><div class="caption-image"><figure class="captioned-images"><div class="attributed-wrap"><img alt="Moving Average Price Crossover Illustration" class="img-responsive" height="478" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/Moving-Average-Price-Crossover-Illustration.width-1200.png" width="801"></div><figcaption>Moving average crossover illustration</figcaption></figure></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>How is this translated to the framework described in our previous article about the weights <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-192" style="width: 2.284em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.036em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.94em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-193"><span class="mi" id="MathJax-Span-194" style="font-family: MathJax_Math-italic;">w</span><span class="mrow" id="MathJax-Span-195" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-196" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-197" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-198" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>w</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-28">w\left(t\right)</script>?</p><p></p><p>Well for this strategy it is pretty straghtforward. All we need is to have a long position, i.e. <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-199" style="width: 2.631em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.334em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.24em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-200"><span class="msubsup" id="MathJax-Span-201"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-202" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-203" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-204" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-205" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-206" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-207" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-29">w_i\left(t\right)</script> &gt;0, as long as the price timeseries is above the EMA timeseries and a short position, i.e. <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-208" style="width: 2.631em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.334em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.24em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-209"><span class="msubsup" id="MathJax-Span-210"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-211" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-212" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-213" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-214" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-215" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-216" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-30">w_i\left(t\right)</script> &lt; 0, as long as the price timeseries is below the EMA timeseries.</p><p></p><p>Since, at this point, we are not interested yet in position sizing, we will assume that we use all our funds available to trade asset <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-217" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-218"><span class="mi" id="MathJax-Span-219" style="font-family: MathJax_Math-italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-31">i</script>. We will also assume that our funds are split equally across all <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-220" style="width: 0.548em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.45em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-221"><span class="mn" id="MathJax-Span-222" style="font-family: MathJax_Main;">3</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-32">3</script> assets (MSFT, AAPL and ^GSPC).</p><p></p><p>Based on these assumptions, our strategy for each of the assets <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-223" style="width: 6.401em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.707em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1005.66em, 2.532em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-224"><span class="mi" id="MathJax-Span-225" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-226" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-227" style="font-family: MathJax_Math-italic; padding-left: 0.151em;">i</span><span class="mo" id="MathJax-Span-228" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mn" id="MathJax-Span-229" style="font-family: MathJax_Main; padding-left: 0.3em;">1</span><span class="mo" id="MathJax-Span-230" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-231" style="font-family: MathJax_Main; padding-left: 0.151em;">…</span><span class="mo" id="MathJax-Span-232" style="font-family: MathJax_Main; padding-left: 0.151em;">,</span><span class="mn" id="MathJax-Span-233" style="font-family: MathJax_Main; padding-left: 0.151em;">3</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.275em; border-left: 0px solid; width: 0px; height: 1.058em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-33">i, i = 1, \ldots, 3</script> can be translated as follows:</p><p></p><ul><li>Go long condition: If <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-234" style="width: 6.302em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.608em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1005.51em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-235"><span class="msubsup" id="MathJax-Span-236"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.5em, 4.368em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-237" style="font-family: MathJax_Math-italic;">p</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.499em;"><span class="mi" id="MathJax-Span-238" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-239" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-240" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-241" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-242" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-243" style="font-family: MathJax_Main; padding-left: 0.3em;">&gt;</span><span class="msubsup" id="MathJax-Span-244" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-246" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-247" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-248" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-249" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-250" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>&gt;</mo><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-34">p_i\left(t\right) > e_i\left(t\right)</script>, then <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-251" style="width: 4.963em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.417em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1004.42em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-252"><span class="msubsup" id="MathJax-Span-253"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-254" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-255" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-256" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-257" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-258" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-259" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-260" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mfrac" id="MathJax-Span-261" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-262" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-263" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.5em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.499em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><mfrac><mn>1</mn><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-35">w_i\left(t\right) = \frac{1}{3}</script></li><li>Go short condition: If <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-264" style="width: 6.302em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.608em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1005.51em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-265"><span class="msubsup" id="MathJax-Span-266"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.5em, 4.368em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-267" style="font-family: MathJax_Math-italic;">p</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.499em;"><span class="mi" id="MathJax-Span-268" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-269" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-270" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-271" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-272" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-273" style="font-family: MathJax_Main; padding-left: 0.3em;">&lt;</span><span class="msubsup" id="MathJax-Span-274" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-275" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-276" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-277" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-278" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-279" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-280" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>&lt;</mo><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-36">p_i\left(t\right) < e_i\left(t\right)</script>, then <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-281" style="width: 5.806em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.161em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1005.16em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-282"><span class="msubsup" id="MathJax-Span-283"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-285" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-286" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-287" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-288" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-289" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-290" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mo" id="MathJax-Span-291" style="font-family: MathJax_Main; padding-left: 0.3em;">−</span><span class="mfrac" id="MathJax-Span-292"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-293" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-294" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.5em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.499em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-37">w_i\left(t\right) = -\frac{1}{3}</script></li></ul><p></p><p>Whenever, the trade conditions are satisfied, the weights are <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-295" style="width: 0.796em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.697em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1000.7em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-296"><span class="mfrac" id="MathJax-Span-297"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-298" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-299" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.5em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.499em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-38">\frac{1}{3}</script> because <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-300" style="width: 0.796em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.697em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1000.7em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-301"><span class="mfrac" id="MathJax-Span-302"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-303" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-304" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.5em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.499em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-39">\frac{1}{3}</script> of the total funds are assigned to each asset and whenever we are long or short, all of the available funds are invested.</p><p></p><p>How is this implemented in Python? The trick is to take the sign of the difference between then price <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-305" style="width: 2.383em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.135em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.04em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-306"><span class="msubsup" id="MathJax-Span-307"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.5em, 4.368em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-308" style="font-family: MathJax_Math-italic;">p</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.499em;"><span class="mi" id="MathJax-Span-309" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-310" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-311" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-313" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-40">p_i\left(t\right)</script> and the EMA <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-314" style="width: 2.334em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.086em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.99em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-315"><span class="msubsup" id="MathJax-Span-316"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-317" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-318" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-319" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-320" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-321" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-322" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-41">e_i\left(t\right)</script>.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Taking the difference between the prices and the EMA timeseries</span><span class="pln">
trading_positions_raw </span><span class="pun">=</span><span class="pln"> data </span><span class="pun">-</span><span class="pln"> ema_short
trading_positions_raw</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">()</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2016-12-26</th><td>2.039488</td><td>1.040200</td><td>20.465712</td></tr><tr><th>2016-12-27</th><td>2.511890</td><td>0.977103</td><td>23.121693</td></tr><tr><th>2016-12-28</th><td>1.822235</td><td>0.623249</td><td>3.765377</td></tr><tr><th>2016-12-29</th><td>1.621664</td><td>0.482954</td><td>2.809706</td></tr><tr><th>2016-12-30</th><td>0.647437</td><td>-0.246519</td><td>-6.894490</td></tr></tbody></table></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Taking the sign of the difference to determine whether the price or the EMA is greater and then multiplying by 1/3</span><span class="pln">
trading_positions </span><span class="pun">=</span><span class="pln"> trading_positions_raw</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="pln">np</span><span class="pun">.</span><span class="pln">sign</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">1</span><span class="pun">/</span><span class="lit">3</span><span class="pln">
trading_positions</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">()</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2016-12-26</th><td>0.333333</td><td>0.333333</td><td>0.333333</td></tr><tr><th>2016-12-27</th><td>0.333333</td><td>0.333333</td><td>0.333333</td></tr><tr><th>2016-12-28</th><td>0.333333</td><td>0.333333</td><td>0.333333</td></tr><tr><th>2016-12-29</th><td>0.333333</td><td>0.333333</td><td>0.333333</td></tr><tr><th>2016-12-30</th><td>0.333333</td><td>-0.333333</td><td>-0.333333</td></tr></tbody></table></section><section><div class="headers read-friendly"><h3 id="FinalCaveat">One Final Caveat</h3></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Before seeing the performance of this strategy, let us focus on the first day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-323" style="width: 0.895em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.8em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-324"><span class="msubsup" id="MathJax-Span-325"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-326" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-327" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-42">t_o</script> when the price timeseries <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-328" style="width: 2.532em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.235em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.13em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-329"><span class="mi" id="MathJax-Span-330" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-331" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-332" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-333"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-334" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-335" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-336" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-43">p\left(t_o\right)</script> crosses above and EMA timeseries <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-337" style="width: 2.83em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.532em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.43em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-338"><span class="msubsup" id="MathJax-Span-339"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-340" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-341" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-342" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-343" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-344"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-345" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-346" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-347" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-44">e_i\left(t_o\right)</script>. Since <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-348" style="width: 6.897em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.153em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1006.05em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-349"><span class="mi" id="MathJax-Span-350" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-351" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-352" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-353"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-354" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-355" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-356" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-357" style="font-family: MathJax_Main; padding-left: 0.3em;">&gt;</span><span class="msubsup" id="MathJax-Span-358" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-360" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-361" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-362" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-363"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-364" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-365" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-366" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow><mo>&gt;</mo><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-45">p\left(t_o\right) > e_i\left(t_o\right)</script>. At that point the trading weight <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-367" style="width: 3.127em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.78em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.68em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-368"><span class="msubsup" id="MathJax-Span-369"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-370" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-371" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-372" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-373" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-374"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-375" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-376" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-377" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-46">w_i\left(t_o\right)</script> becomes positive, and thus according to our trading strategy, we need to set for that day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-378" style="width: 5.459em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.864em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1004.86em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-379"><span class="msubsup" id="MathJax-Span-380"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-381" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-382" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-383" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-384" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-385"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-386" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-387" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-388" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-389" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mfrac" id="MathJax-Span-390" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-391" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-392" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.5em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.499em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow><mo>=</mo><mfrac><mn>1</mn><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-47">w_i\left(t_o\right)=\frac{1}{3}</script>.</p><p></p><p>However, bear in mind that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-393" style="width: 2.532em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.235em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.13em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-394"><span class="mi" id="MathJax-Span-395" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-396" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-397" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-398"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-399" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-400" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-401" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-48">p\left(t_o\right)</script> is the price of the asset at the close of day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-402" style="width: 0.895em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.8em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-403"><span class="msubsup" id="MathJax-Span-404"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-405" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-406" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-49">t_o</script>. For this reason, we will not know that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-407" style="width: 6.897em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.153em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1006.05em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-408"><span class="mi" id="MathJax-Span-409" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-410" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-411" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-412"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-413" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-414" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-415" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-416" style="font-family: MathJax_Main; padding-left: 0.3em;">&gt;</span><span class="msubsup" id="MathJax-Span-417" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-418" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-419" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-420" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-421" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-422"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-423" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-424" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-425" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow><mo>&gt;</mo><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><msub><mi>t</mi><mi>o</mi></msub><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-50">p\left(t_o\right) > e_i\left(t_o\right)</script> until the close of the trading day. Therefore, when calculating the returns of the strategy, to assume that on day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-426" style="width: 0.895em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.8em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-427"><span class="msubsup" id="MathJax-Span-428"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-429" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-430" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-51">t_o</script> we had a long position is an error; it is equivalent to us peaking into the future, since we only know we have to go long at the end of day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-431" style="width: 0.895em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.8em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-432"><span class="msubsup" id="MathJax-Span-433"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-434" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-435" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-52">t_o</script>.</p><p></p><p>The best we can do is assume that we traded at the close of this day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-436" style="width: 0.895em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.8em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-437"><span class="msubsup" id="MathJax-Span-438"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-439" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-440" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-53">t_o</script>. Therefore our position will be long starting on the following day, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-441" style="width: 2.78em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.483em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1002.43em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-442"><span class="msubsup" id="MathJax-Span-443"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-444" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-445" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-446" style="font-family: MathJax_Main; padding-left: 0.201em;">+</span><span class="mn" id="MathJax-Span-447" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.058em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-54">t_o + 1</script>. This is easily corrected for by lagging our trading positions by one day, so that on day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-448" style="width: 0.895em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.8em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-449"><span class="msubsup" id="MathJax-Span-450"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-451" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-452" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-55">t_o</script> our actual position is that of the previous day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-453" style="width: 2.78em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.483em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1002.43em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-454"><span class="msubsup" id="MathJax-Span-455"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-456" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-457" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-458" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-459" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.058em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-56">t_o - 1</script> and only on day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-460" style="width: 2.78em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.483em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1002.43em, 2.483em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-461"><span class="msubsup" id="MathJax-Span-462"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.227em, 1000.35em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-463" style="font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.35em;"><span class="mi" id="MathJax-Span-464" style="font-size: 70.7%; font-family: MathJax_Math-italic;">o</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mo" id="MathJax-Span-465" style="font-family: MathJax_Main; padding-left: 0.201em;">+</span><span class="mn" id="MathJax-Span-466" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.219em; border-left: 0px solid; width: 0px; height: 1.058em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mi>o</mi></msub><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-57">t_o + 1</script> do we have a long position. Thus:</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Lagging our trading signals by one day.</span><span class="pln">
trading_positions_final </span><span class="pun">=</span><span class="pln"> trading_positions</span><span class="pun">.</span><span class="pln">shift</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Let us examine what the timeseries and the respective trading position look like for one of our assets, Microsoft.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="pln">fig</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ax1</span><span class="pun">,</span><span class="pln"> ax2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">subplots</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> figsize</span><span class="pun">=(</span><span class="lit">16</span><span class="pun">,</span><span class="lit">9</span><span class="pun">))</span><span class="pln">

ax1</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'Price'</span><span class="pun">)</span><span class="pln">
ax1</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">ema_short</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> ema_short</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> label </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Span 20-days EMA'</span><span class="pun">)</span><span class="pln">

ax1</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'$'</span><span class="pun">)</span><span class="pln">
ax1</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax1</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">

ax2</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">trading_positions_final</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="pun">:].</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> trading_positions_final</span><span class="pun">.</span><span class="pln">loc</span><span class="pun">[</span><span class="pln">start_date</span><span class="pun">:</span><span class="pln">end_date</span><span class="pun">,</span><span class="pln"> </span><span class="str">'MSFT'</span><span class="pun">],</span><span class="pln"> 
        label</span><span class="pun">=</span><span class="str">'Trading position'</span><span class="pun">)</span><span class="pln">

ax2</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Trading position'</span><span class="pun">)</span><span class="pln">
ax2</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><div class="output-image"><div class="out-tag">RESULT:</div><figure class="output-images"><div class="attributed-wrap"><img alt="MSFT Price EMA and Trading Positions" class="img-responsive" height="524" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/price_20_day_ema_with_trading_positions.width-1200.png" width="959"></div></figure></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Now that the position our strategy dictates each day has been calculated, the performance of this strategy can be easily estimated. To that end, we will need again the log-returns of the three assets <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-467" style="width: 2.334em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.086em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.99em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-468"><span class="msubsup" id="MathJax-Span-469"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-470" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-471" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-472" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-473" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-474" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-475" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-58">r_i\left(t\right)</script>. These are calculated as:</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Log returns - First the logarithm of the prices is taken and the the difference of consecutive (log) observations</span><span class="pln">
asset_log_returns </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">data</span><span class="pun">).</span><span class="pln">diff</span><span class="pun">()</span><span class="pln">
asset_log_returns</span><span class="pun">.</span><span class="pln">head</span><span class="pun">()</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2000-01-03</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2000-01-04</th><td>-0.088078</td><td>-0.034364</td><td>-0.039099</td></tr><tr><th>2000-01-05</th><td>0.014528</td><td>0.010489</td><td>0.001920</td></tr><tr><th>2000-01-06</th><td>-0.090514</td><td>-0.034072</td><td>0.000955</td></tr><tr><th>2000-01-07</th><td>0.046281</td><td>0.012984</td><td>0.026730</td></tr></tbody></table></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Note that our strategy trades each asset separately and is agnostic of what the behaviour of the other assets is. Whether we are going to be long or short (and how much) in MSFT is in no way affected by the other two assets. With this in mind, the daily log-returns of the strategy for each asset <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-476" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-477"><span class="mi" id="MathJax-Span-478" style="font-family: MathJax_Math-italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-59">i</script>, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-479" style="width: 2.383em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.135em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.04em, 2.631em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-480"><span class="msubsup" id="MathJax-Span-481"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-482" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-483" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -3.718em; left: 0.449em;"><span class="texatom" id="MathJax-Span-484"><span class="mrow" id="MathJax-Span-485"><span class="mi" id="MathJax-Span-486" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-487" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-488" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-489" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-490" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.386em; border-left: 0px solid; width: 0px; height: 1.281em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-60">r_{i}^s\left(t\right)</script> are calculated as</p><p></p><p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-491" style="width: 9.08em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.088em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1007.99em, 2.631em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-492"><span class="msubsup" id="MathJax-Span-493"><span style="display: inline-block; position: relative; width: 0.846em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-494" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-495" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -3.718em; left: 0.449em;"><span class="texatom" id="MathJax-Span-496"><span class="mrow" id="MathJax-Span-497"><span class="mi" id="MathJax-Span-498" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-499" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-500" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-501" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-502" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-503" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="msubsup" id="MathJax-Span-504" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-505" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-506" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-507" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-508" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-509" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-510" style="font-family: MathJax_Main;">)</span></span><span class="msubsup" id="MathJax-Span-511" style="padding-left: 0.151em;"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-512" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-513" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-514" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-515" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-516" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-517" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.386em; border-left: 0px solid; width: 0px; height: 1.281em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><msub><mi>r</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-61">\begin{equation} r_{i}^s\left(t\right) = w_i\left(t\right) r_i\left(t\right) \end{equation}</script></p><p></p><p>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-518" style="width: 2.631em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.334em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.24em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-519"><span class="msubsup" id="MathJax-Span-520"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-521" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-522" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-523" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-524" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-525" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-526" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-62">w_i\left(t\right)</script> is the strategy position on day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-527" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-528"><span class="mi" id="MathJax-Span-529" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.836em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-63">t</script> which has already been attained at the end of trading day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-530" style="width: 2.284em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.036em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1001.99em, 2.433em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-531"><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-533" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-534" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.164em; border-left: 0px solid; width: 0px; height: 0.947em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-64">t-1</script>.</p><p></p><p>What does this mean?</p><p></p><p>Assume that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-535" style="width: 2.036em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.788em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.69em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-536"><span class="mi" id="MathJax-Span-537" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-538" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-539" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-540" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-541" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-65">p\left(t\right)</script> crosses above <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-542" style="width: 2.334em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.086em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1001.99em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-543"><span class="msubsup" id="MathJax-Span-544"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-545" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-546" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-547" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-548" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-549" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-550" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>e</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-66">e_i\left(t\right)</script> sometime during the trading session on Monday, day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-551" style="width: 2.284em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.036em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1001.99em, 2.433em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-552"><span class="mi" id="MathJax-Span-553" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-554" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-555" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.164em; border-left: 0px solid; width: 0px; height: 0.947em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-67">t-1</script>. We assume that at the close on Monday we buy enough units of asset <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-556" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-557"><span class="mi" id="MathJax-Span-558" style="font-family: MathJax_Math-italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-68">i</script> to spend <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-559" style="width: 0.796em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.697em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1000.7em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-560"><span class="mfrac" id="MathJax-Span-561"><span style="display: inline-block; position: relative; width: 0.499em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.425em, 1000.3em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-562" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-563" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.5em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.499em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-69">\frac{1}{3}</script> of our total funds, that is <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0024;&lt;/mi&gt;&lt;mfrac&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-564" style="width: 1.639em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.441em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1001.44em, 2.731em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-565"><span class="mi" id="MathJax-Span-566" style="font-family: MathJax_Main;">$</span><span class="mfrac" id="MathJax-Span-567"><span style="display: inline-block; position: relative; width: 0.747em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.375em, 1000.65em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.295em;"><span class="mi" id="MathJax-Span-568" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.052em;"></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-569" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.75em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.747em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.558em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">$</mi><mfrac><mi>N</mi><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-70">\$\frac{N}{3}</script> and that the price we bought at is <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0024;&lt;/mi&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-570" style="width: 7.145em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.352em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1006.3em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-571"><span class="mi" id="MathJax-Span-572" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-573" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-574" style="font-family: MathJax_Main;">(</span><span class="mrow" id="MathJax-Span-575"><span class="mi" id="MathJax-Span-576" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-577" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-578" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span class="mo" id="MathJax-Span-579" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-580" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mi" id="MathJax-Span-581" style="font-family: MathJax_Main; padding-left: 0.3em;">$</span><span class="mn" id="MathJax-Span-582" style="font-family: MathJax_Main;">10</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><mo>)</mo></mrow><mo>=</mo><mi mathvariant="normal">$</mi><mn>10</mn></math></span></span><script type="math/tex" id="MathJax-Element-71">p\left(t-1\right) = \$10</script>. Let us also assume that on Tuesday, day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-583" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-584"><span class="mi" id="MathJax-Span-585" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.836em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-72">t</script>, the price closes at <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0024;&lt;/mi&gt;&lt;mn&gt;10.5&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-586" style="width: 6.104em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.459em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1005.41em, 2.582em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-587"><span class="mi" id="MathJax-Span-588" style="font-family: MathJax_Math-italic;">p</span><span class="mrow" id="MathJax-Span-589" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-590" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-591" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-592" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-593" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mi" id="MathJax-Span-594" style="font-family: MathJax_Main; padding-left: 0.3em;">$</span><span class="mn" id="MathJax-Span-595" style="font-family: MathJax_Main;">10.5</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.331em; border-left: 0px solid; width: 0px; height: 1.225em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><mi mathvariant="normal">$</mi><mn>10.5</mn></math></span></span><script type="math/tex" id="MathJax-Element-73">p\left(t\right) = \$10.5</script>. Then our log-return for asset <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-596" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-597"><span class="mi" id="MathJax-Span-598" style="font-family: MathJax_Math-italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.892em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-74">i</script> on Tuesday, is simply</p><p></p><p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;$&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;10.5&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0024;&lt;/mi&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2243;&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;0.049&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-599" style="width: 12.651em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.262em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.788em, 1011.26em, 4.467em, -999.998em); top: -3.371em; left: 0em;"><span class="mrow" id="MathJax-Span-600"><span class="mfrac" id="MathJax-Span-601"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.227em, 1000.45em, 4.169em, -999.998em); top: -4.71em; left: 50%; margin-left: -0.246em;"><span class="mn" id="MathJax-Span-602" style="font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.227em, 1000.45em, 4.169em, -999.998em); top: -3.321em; left: 50%; margin-left: -0.246em;"><span class="mn" id="MathJax-Span-603" style="font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1000.6em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.598em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span><span class="mo" id="MathJax-Span-604" style="font-family: MathJax_Main; padding-left: 0.201em;">×</span><span class="mi" id="MathJax-Span-605" style="font-family: MathJax_Main; padding-left: 0.201em;">log</span><span class="mo" id="MathJax-Span-606"></span><span class="mrow" id="MathJax-Span-607"><span class="mo" id="MathJax-Span-608" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">(</span></span><span class="mfrac" id="MathJax-Span-609"><span style="display: inline-block; position: relative; width: 2.383em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.127em, 1002.24em, 4.219em, -999.998em); top: -4.71em; left: 50%; margin-left: -1.138em;"><span class="mrow" id="MathJax-Span-610"><span class="texatom" id="MathJax-Span-611"><span class="mrow" id="MathJax-Span-612"><span class="mo" id="MathJax-Span-613" style="font-family: MathJax_Main;">$</span></span></span><span class="mn" id="MathJax-Span-614" style="font-family: MathJax_Main;">10.5</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.127em, 1001.44em, 4.219em, -999.998em); top: -3.321em; left: 50%; margin-left: -0.742em;"><span class="mrow" id="MathJax-Span-615"><span class="mi" id="MathJax-Span-616" style="font-family: MathJax_Main;">$</span><span class="mn" id="MathJax-Span-617" style="font-family: MathJax_Main;">10</span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1002.38em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.383em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span><span class="mo" id="MathJax-Span-618" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">)</span></span></span><span class="mo" id="MathJax-Span-619" style="font-family: MathJax_Main; padding-left: 0.3em;">≃</span><span class="mfrac" id="MathJax-Span-620" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 2.383em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.177em, 1002.24em, 4.169em, -999.998em); top: -4.71em; left: 50%; margin-left: -1.138em;"><span class="mn" id="MathJax-Span-621" style="font-family: MathJax_Main;">0.049</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.227em, 1000.45em, 4.169em, -999.998em); top: -3.321em; left: 50%; margin-left: -0.246em;"><span class="mn" id="MathJax-Span-622" style="font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1002.38em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.383em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.375em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.108em; border-left: 0px solid; width: 0px; height: 2.781em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mfrac><mn>1</mn><mn>3</mn></mfrac><mo>×</mo><mi>log</mi><mo>⁡</mo><mrow><mo>(</mo><mfrac><mrow><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mn>10.5</mn></mrow><mrow><mi mathvariant="normal">$</mi><mn>10</mn></mrow></mfrac><mo>)</mo></mrow><mo>≃</mo><mfrac><mn>0.049</mn><mn>3</mn></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-75"> \frac{1}{3} \times \log \left(\frac{$10.5}{\$10} \right) \simeq \frac{0.049}{3}</script></p><p></p><p>The actual return <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-623" style="width: 3.425em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.028em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1002.93em, 2.78em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-624"><span class="msubsup" id="MathJax-Span-625"><span style="display: inline-block; position: relative; width: 1.739em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-626" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-627" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.375em, 1001.29em, 4.318em, -999.998em); top: -3.668em; left: 0.449em;"><span class="texatom" id="MathJax-Span-628"><span class="mrow" id="MathJax-Span-629"><span class="mtext" id="MathJax-Span-630" style="font-size: 70.7%; font-family: MathJax_Main;">rel</span><span class="mo" id="MathJax-Span-631" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-632" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-633" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-634" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-635" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-636" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.553em; border-left: 0px solid; width: 0px; height: 1.447em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>rel</mtext><mo>,</mo><mi>i</mi></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-76">r_{\text{rel}, i}^s\left(t\right)</script> is</p><p></p><p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;exp&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mrow&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;0.05&lt;/mn&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-637" style="width: 20.191em; display: inline-block;"><span style="display: inline-block; position: relative; width: 18.008em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(0.697em, 1018.01em, 3.028em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-638"><span class="msubsup" id="MathJax-Span-639"><span style="display: inline-block; position: relative; width: 1.739em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-640" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-641" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.375em, 1001.29em, 4.318em, -999.998em); top: -3.668em; left: 0.449em;"><span class="texatom" id="MathJax-Span-642"><span class="mrow" id="MathJax-Span-643"><span class="mtext" id="MathJax-Span-644" style="font-size: 70.7%; font-family: MathJax_Main;">rel</span><span class="mo" id="MathJax-Span-645" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-646" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-647" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-648" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-649" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-650" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-651" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="msubsup" id="MathJax-Span-652" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.7em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-653" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.697em;"><span class="mi" id="MathJax-Span-654" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-655" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-656" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-657" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-658" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-659" style="font-family: MathJax_Main; padding-left: 0.201em;">×</span><span class="mrow" id="MathJax-Span-660" style="padding-left: 0.201em;"><span class="mo" id="MathJax-Span-661" style="font-family: MathJax_Main;">[</span><span class="mrow" id="MathJax-Span-662"><span class="mi" id="MathJax-Span-663" style="font-family: MathJax_Main;">exp</span><span class="mo" id="MathJax-Span-664"></span><span class="mrow" id="MathJax-Span-665"><span class="mo" id="MathJax-Span-666" style="font-family: MathJax_Main;">(</span><span class="mrow" id="MathJax-Span-667"><span class="msubsup" id="MathJax-Span-668"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-669" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-670" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-671" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-672" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-673" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-674" style="font-family: MathJax_Main;">)</span></span></span><span class="mo" id="MathJax-Span-675" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-676" style="font-family: MathJax_Main; padding-left: 0.201em;">−</span><span class="mn" id="MathJax-Span-677" style="font-family: MathJax_Main; padding-left: 0.201em;">1</span></span><span class="mo" id="MathJax-Span-678" style="font-family: MathJax_Main;">]</span></span><span class="mo" id="MathJax-Span-679" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mfrac" id="MathJax-Span-680" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 1.887em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.227em, 1001.74em, 4.169em, -999.998em); top: -4.71em; left: 50%; margin-left: -0.89em;"><span class="mn" id="MathJax-Span-681" style="font-family: MathJax_Main;">0.05</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.227em, 1000.45em, 4.169em, -999.998em); top: -3.321em; left: 50%; margin-left: -0.246em;"><span class="mn" id="MathJax-Span-682" style="font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1001.89em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.887em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.831em; border-left: 0px solid; width: 0px; height: 2.392em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>rel</mtext><mo>,</mo><mi>i</mi></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>×</mo><mrow><mo>[</mo><mrow><mi>exp</mi><mo>⁡</mo><mrow><mo>(</mo><mrow><msub><mi>r</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></mrow><mo>)</mo></mrow><mo>−</mo><mn>1</mn></mrow><mo>]</mo></mrow><mo>=</mo><mfrac><mn>0.05</mn><mn>3</mn></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-77">\begin{equation} r_{\text{rel}, i}^s\left(t\right) = w_i\left(t\right) \times \left[\exp \left(r_i\left(t\right)\right) - 1 \right] = \frac{0.05}{3} \end{equation}</script></p><p></p><p>In terms of dollars, on Tuesday, day <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-78-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-683" style="width: 0.399em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.35em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.391em, 1000.3em, 2.334em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-684"><span class="mi" id="MathJax-Span-685" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.053em; border-left: 0px solid; width: 0px; height: 0.836em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-78">t</script>, we made <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-79-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0024;&lt;/mi&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mn&gt;0.05&lt;/mn&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;/mrow&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-686" style="width: 10.27em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.179em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.143em, 1009.18em, 2.78em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-687"><span class="mi" id="MathJax-Span-688" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.102em;"></span></span><span class="mo" id="MathJax-Span-689" style="font-family: MathJax_Main; padding-left: 0.201em;">×</span><span class="msubsup" id="MathJax-Span-690" style="padding-left: 0.201em;"><span style="display: inline-block; position: relative; width: 1.739em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-691" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-692" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.375em, 1001.29em, 4.318em, -999.998em); top: -3.668em; left: 0.449em;"><span class="texatom" id="MathJax-Span-693"><span class="mrow" id="MathJax-Span-694"><span class="mtext" id="MathJax-Span-695" style="font-size: 70.7%; font-family: MathJax_Main;">rel</span><span class="mo" id="MathJax-Span-696" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-697" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-698" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-699" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-700" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-701" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-702" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="mi" id="MathJax-Span-703" style="font-family: MathJax_Main; padding-left: 0.3em;">$</span><span class="mfrac" id="MathJax-Span-704"><span style="display: inline-block; position: relative; width: 1.987em; height: 0px; margin-right: 0.102em; margin-left: 0.102em;"><span style="position: absolute; clip: rect(3.375em, 1001.89em, 4.169em, -999.998em); top: -4.412em; left: 50%; margin-left: -0.94em;"><span class="mrow" id="MathJax-Span-705"><span class="mn" id="MathJax-Span-706" style="font-size: 70.7%; font-family: MathJax_Main;">0.05</span><span class="mi" id="MathJax-Span-707" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.052em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1000.35em, 4.169em, -999.998em); top: -3.619em; left: 50%; margin-left: -0.196em;"><span class="mn" id="MathJax-Span-708" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(0.846em, 1001.99em, 1.193em, -999.998em); top: -1.238em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.987em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.553em; border-left: 0px solid; width: 0px; height: 1.669em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>×</mo><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>rel</mtext><mo>,</mo><mi>i</mi></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><mi mathvariant="normal">$</mi><mfrac><mrow><mn>0.05</mn><mi>N</mi></mrow><mn>3</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-79">N \times r_{\text{rel}, i}^s\left(t\right) = \$ \frac{0.05N}{3}</script>.</p><p></p><p>To get all the strategy log-returns for all days, one needs simply to multiply the strategy positions with the asset log-returns.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="pln">strategy_asset_log_returns </span><span class="pun">=</span><span class="pln"> trading_positions_final </span><span class="pun">*</span><span class="pln"> asset_log_returns
strategy_asset_log_returns</span><span class="pun">.</span><span class="pln">tail</span><span class="pun">()</span><span class="pln">
</span></pre></div></section><section><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>AAPL</th><th>MSFT</th><th>^GSPC</th></tr></thead><tbody><tr><th>2016-12-26</th><td>0.000000</td><td>0.000000</td><td>0.000000</td></tr><tr><th>2016-12-27</th><td>0.002110</td><td>0.000211</td><td>0.000749</td></tr><tr><th>2016-12-28</th><td>-0.001424</td><td>-0.001531</td><td>-0.002797</td></tr><tr><th>2016-12-29</th><td>-0.000086</td><td>-0.000477</td><td>-0.000098</td></tr><tr><th>2016-12-30</th><td>-0.002609</td><td>-0.004052</td><td>-0.001549</td></tr></tbody></table></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Remembering that the log-returns can be added to show performance across time, let us plot the cumulative log-returns and the cumulative total relative returns of our strategy for each of the assets.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Get the cumulative log-returns per asset</span><span class="pln">
cum_strategy_asset_log_returns </span><span class="pun">=</span><span class="pln"> strategy_asset_log_returns</span><span class="pun">.</span><span class="pln">cumsum</span><span class="pun">()</span><span class="pln">

</span><span class="com"># Transform the cumulative log returns to relative returns</span><span class="pln">
cum_strategy_asset_relative_returns </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">exp</span><span class="pun">(</span><span class="pln">cum_strategy_asset_log_returns</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

fig</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ax1</span><span class="pun">,</span><span class="pln"> ax2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">subplots</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> figsize</span><span class="pun">=(</span><span class="lit">16</span><span class="pun">,</span><span class="lit">9</span><span class="pun">))</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> c </span><span class="kwd">in</span><span class="pln"> asset_log_returns</span><span class="pun">:</span><span class="pln">
    ax1</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">cum_strategy_asset_log_returns</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> cum_strategy_asset_log_returns</span><span class="pun">[</span><span class="pln">c</span><span class="pun">],</span><span class="pln"> label</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">c</span><span class="pun">))</span><span class="pln">

ax1</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Cumulative log-returns'</span><span class="pun">)</span><span class="pln">
ax1</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax1</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> c </span><span class="kwd">in</span><span class="pln"> asset_log_returns</span><span class="pun">:</span><span class="pln">
    ax2</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">cum_strategy_asset_relative_returns</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">*</span><span class="pln">cum_strategy_asset_relative_returns</span><span class="pun">[</span><span class="pln">c</span><span class="pun">],</span><span class="pln"> label</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">c</span><span class="pun">))</span><span class="pln">

ax2</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Total relative returns (%)'</span><span class="pun">)</span><span class="pln">
ax2</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax2</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><div class="output-image"><div class="out-tag">RESULT:</div><figure class="output-images"><div class="attributed-wrap"><img alt="Cumulative and Log Returns of AAPL MSFT and GSPC" class="img-responsive" height="524" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/Cumulative_and_log_returns.width-1200.png" width="967"></div></figure></div></section><section><div class="headers read-friendly"><h2 id="ReturnOfStrat">What is the Total Return of the Strategy?</h2></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>Strictly speaking, we can only add relative returns to calculate the strategy returns. Therefore <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-80-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/msubsup&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-709" style="width: 9.625em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.584em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(0.3em, 1008.49em, 3.524em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-710"><span class="msubsup" id="MathJax-Span-711"><span style="display: inline-block; position: relative; width: 1.292em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-712" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-713" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.375em, 1000.85em, 4.169em, -999.998em); top: -3.668em; left: 0.449em;"><span class="texatom" id="MathJax-Span-714"><span class="mrow" id="MathJax-Span-715"><span class="mtext" id="MathJax-Span-716" style="font-size: 70.7%; font-family: MathJax_Main;">rel</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-717" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-718" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-719" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-720" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-721" style="font-family: MathJax_Main; padding-left: 0.3em;">=</span><span class="munderover" id="MathJax-Span-722" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 1.441em; height: 0px;"><span style="position: absolute; clip: rect(2.929em, 1001.39em, 4.616em, -999.998em); top: -4.015em; left: 0em;"><span class="mo" id="MathJax-Span-723" style="font-family: MathJax_Size2; vertical-align: 0em;">∑</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.425em, 1001.09em, 4.268em, -999.998em); top: -2.924em; left: 0.151em;"><span class="texatom" id="MathJax-Span-724"><span class="mrow" id="MathJax-Span-725"><span class="mi" id="MathJax-Span-726" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-727" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mn" id="MathJax-Span-728" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.326em, 1000.35em, 4.169em, -999.998em); top: -5.156em; left: 0.548em;"><span class="texatom" id="MathJax-Span-729"><span class="mrow" id="MathJax-Span-730"><span class="mn" id="MathJax-Span-731" style="font-size: 70.7%; font-family: MathJax_Main;">3</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-732" style="padding-left: 0.151em;"><span style="display: inline-block; position: relative; width: 1.739em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-733" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.574em, 1000.4em, 4.169em, -999.998em); top: -4.363em; left: 0.449em;"><span class="mi" id="MathJax-Span-734" style="font-size: 70.7%; font-family: MathJax_Math-italic;">s</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; clip: rect(3.375em, 1001.29em, 4.318em, -999.998em); top: -3.668em; left: 0.449em;"><span class="texatom" id="MathJax-Span-735"><span class="mrow" id="MathJax-Span-736"><span class="mtext" id="MathJax-Span-737" style="font-size: 70.7%; font-family: MathJax_Main;">rel</span><span class="mo" id="MathJax-Span-738" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-739" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-740" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-741" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-742" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-743" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.386em; border-left: 0px solid; width: 0px; height: 3.392em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>rel</mtext></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>=</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>3</mn></mrow></munderover><msubsup><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>rel</mtext><mo>,</mo><mi>i</mi></mrow><mi>s</mi></msubsup><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-80"> r_{\text{rel}}^s\left(t\right) = \sum_{i=1}^{3}r_{\text{rel}, i}^s\left(t\right)</script>.</p><p></p><p>We saw in the previous article, however, that for small values of the relative returns, the following approximation holds <span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: left;"><span class="MathJax" id="MathJax-Element-81-Frame" tabindex="0" style="text-align: left; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2243;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-744" style="width: 7.294em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.5em; height: 0px; font-size: 112%;"><span style="position: absolute; clip: rect(1.292em, 1006.4em, 2.631em, -999.998em); top: -2.18em; left: 0em;"><span class="mrow" id="MathJax-Span-745"><span class="msubsup" id="MathJax-Span-746"><span style="display: inline-block; position: relative; width: 0.796em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-747" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="mi" id="MathJax-Span-748" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-749" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-750" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-751" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-752" style="font-family: MathJax_Main;">)</span></span><span class="mo" id="MathJax-Span-753" style="font-family: MathJax_Main; padding-left: 0.3em;">≃</span><span class="msubsup" id="MathJax-Span-754" style="padding-left: 0.3em;"><span style="display: inline-block; position: relative; width: 1.739em; height: 0px;"><span style="position: absolute; clip: rect(3.425em, 1000.45em, 4.169em, -999.998em); top: -4.015em; left: 0em;"><span class="mi" id="MathJax-Span-755" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span><span style="position: absolute; top: -3.867em; left: 0.449em;"><span class="texatom" id="MathJax-Span-756"><span class="mrow" id="MathJax-Span-757"><span class="mtext" id="MathJax-Span-758" style="font-size: 70.7%; font-family: MathJax_Main;">rel</span><span class="mo" id="MathJax-Span-759" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-760" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 4.02em;"></span></span></span></span><span class="mrow" id="MathJax-Span-761" style="padding-left: 0.151em;"><span class="mo" id="MathJax-Span-762" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-763" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-764" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.185em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.386em; border-left: 0px solid; width: 0px; height: 1.281em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>r</mi><mi>i</mi></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow><mo>≃</mo><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>rel</mtext><mo>,</mo><mi>i</mi></mrow></msub><mrow><mo>(</mo><mi>t</mi><mo>)</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-81"> r_i\left(t\right) \simeq r_{\text{rel},i}\left(t\right)</script></p><p></p><p>Thus, an alternative way is to simply add all the strategy log-returns first and then convert these to relative returns. Let us examine how good this approximation is.</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Total strategy relative returns. This is the exact calculation.</span><span class="pln">
cum_relative_return_exact </span><span class="pun">=</span><span class="pln"> cum_strategy_asset_relative_returns</span><span class="pun">.</span><span class="pln">sum</span><span class="pun">(</span><span class="pln">axis</span><span class="pun">=</span><span class="lit">1</span><span class="pun">)</span><span class="pln">

</span><span class="com"># Get the cumulative log-returns per asset</span><span class="pln">
cum_strategy_log_return </span><span class="pun">=</span><span class="pln"> cum_strategy_asset_log_returns</span><span class="pun">.</span><span class="pln">sum</span><span class="pun">(</span><span class="pln">axis</span><span class="pun">=</span><span class="lit">1</span><span class="pun">)</span><span class="pln">

</span><span class="com"># Transform the cumulative log returns to relative returns. This is the approximation</span><span class="pln">
cum_relative_return_approx </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">exp</span><span class="pun">(</span><span class="pln">cum_strategy_log_return</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

fig</span><span class="pun">,</span><span class="pln"> ax </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">subplots</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">16</span><span class="pun">,</span><span class="lit">9</span><span class="pun">))</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">cum_relative_return_exact</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">*</span><span class="pln">cum_relative_return_exact</span><span class="pun">,</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'Exact'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">cum_relative_return_approx</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">*</span><span class="pln">cum_relative_return_approx</span><span class="pun">,</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'Approximation'</span><span class="pun">)</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Total cumulative relative returns (%)'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section><div class="output-image"><div class="out-tag">RESULT:</div><figure class="output-images"><div class="attributed-wrap"><img alt="Exact vs Approx Cumulative Relative Returns" class="img-responsive" height="525" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/Exact_vs_Approx_Cumulative_Relative_Returns.width-1200.png" width="956"></div></figure></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>As we can see, for relatively small time-intervals and as long the assumption that relative returns are small enough, the calculation of the total strategy returns using the log-return approximation can be satisfactory. However, when the small scale assumption breaks down, then the approximation is poor. Therefore what we need to remember the following:</p><ol><li>Log-returns can and should be added across time for a single asset to calculate cumulative return timeseries across time.</li><li>However, when summing (or averaging) log-returns across assets, care should be taken. Relative returns can be added, but log-returns only if we can safely assume they are a good-enough approximation of the relative returns.</li></ol><p>The overall, yearly, performance of our strategy can be calculated again as:</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="kwd">def</span><span class="pln"> print_portfolio_yearly_statistics</span><span class="pun">(</span><span class="pln">portfolio_cumulative_relative_returns</span><span class="pun">,</span><span class="pln"> days_per_year </span><span class="pun">=</span><span class="pln"> </span><span class="lit">52</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">5</span><span class="pun">):</span><span class="pln">

    total_days_in_simulation </span><span class="pun">=</span><span class="pln"> portfolio_cumulative_relative_returns</span><span class="pun">.</span><span class="pln">shape</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
    number_of_years </span><span class="pun">=</span><span class="pln"> total_days_in_simulation </span><span class="pun">/</span><span class="pln"> days_per_year

    </span><span class="com"># The last data point will give us the total portfolio return</span><span class="pln">
    total_portfolio_return </span><span class="pun">=</span><span class="pln"> portfolio_cumulative_relative_returns</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
    </span><span class="com"># Average portfolio return assuming compunding of returns</span><span class="pln">
    average_yearly_return </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> total_portfolio_return</span><span class="pun">)**(</span><span class="lit">1</span><span class="pun">/</span><span class="pln">number_of_years</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'Total portfolio return is: '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'{:5.2f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="lit">100</span><span class="pun">*</span><span class="pln">total_portfolio_return</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'%'</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'Average yearly return is: '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'{:5.2f}'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="lit">100</span><span class="pun">*</span><span class="pln">average_yearly_return</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'%'</span><span class="pun">)</span><span class="pln">

print_portfolio_yearly_statistics</span><span class="pun">(</span><span class="pln">cum_relative_return_exact</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section>Total portfolio return is: 108.24% Average yearly return is: 4.39%</section><section><div class="headers read-friendly"><h2 id="WhatNext">What Next?</h2></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>One can observe that this strategy significantly underperforms the buy and hold strategy that was presented in the previous article. Let's compare them again:</p></div></div></section><section><div class="code-embed "><pre class="prettyprint lang-py prettyprinted" style=""><span class="com"># Define the weights matrix for the simple buy-and-hold strategy</span><span class="pln">
simple_weights_matrix </span><span class="pun">=</span><span class="pln"> pd</span><span class="pun">.</span><span class="typ">DataFrame</span><span class="pun">(</span><span class="lit">1</span><span class="pun">/</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> columns</span><span class="pun">=</span><span class="pln">data</span><span class="pun">.</span><span class="pln">columns</span><span class="pun">)</span><span class="pln">

</span><span class="com"># Get the buy-and-hold strategy log returns per asset</span><span class="pln">
simple_strategy_asset_log_returns </span><span class="pun">=</span><span class="pln"> simple_weights_matrix </span><span class="pun">*</span><span class="pln"> asset_log_returns

</span><span class="com"># Get the cumulative log-returns per asset</span><span class="pln">
simple_cum_strategy_asset_log_returns </span><span class="pun">=</span><span class="pln"> simple_strategy_asset_log_returns</span><span class="pun">.</span><span class="pln">cumsum</span><span class="pun">()</span><span class="pln">

</span><span class="com"># Transform the cumulative log returns to relative returns</span><span class="pln">
simple_cum_strategy_asset_relative_returns </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">exp</span><span class="pun">(</span><span class="pln">simple_cum_strategy_asset_log_returns</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

</span><span class="com"># Total strategy relative returns. This is the exact calculation.</span><span class="pln">
simple_cum_relative_return_exact </span><span class="pun">=</span><span class="pln"> simple_cum_strategy_asset_relative_returns</span><span class="pun">.</span><span class="pln">sum</span><span class="pun">(</span><span class="pln">axis</span><span class="pun">=</span><span class="lit">1</span><span class="pun">)</span><span class="pln">

fig</span><span class="pun">,</span><span class="pln"> ax </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">subplots</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">16</span><span class="pun">,</span><span class="lit">9</span><span class="pun">))</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">cum_relative_return_exact</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">*</span><span class="pln">cum_relative_return_exact</span><span class="pun">,</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'EMA strategy'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">simple_cum_relative_return_exact</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">*</span><span class="pln">simple_cum_relative_return_exact</span><span class="pun">,</span><span class="pln"> label</span><span class="pun">=</span><span class="str">'Buy and hold'</span><span class="pun">)</span><span class="pln">

ax</span><span class="pun">.</span><span class="pln">set_ylabel</span><span class="pun">(</span><span class="str">'Total cumulative relative returns (%)'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">legend</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="str">'best'</span><span class="pun">)</span><span class="pln">
ax</span><span class="pun">.</span><span class="pln">xaxis</span><span class="pun">.</span><span class="pln">set_major_formatter</span><span class="pun">(</span><span class="pln">my_year_month_fmt</span><span class="pun">)</span><span class="pln">

print_portfolio_yearly_statistics</span><span class="pun">(</span><span class="pln">simple_cum_relative_return_exact</span><span class="pun">)</span><span class="pln">
</span></pre></div></section><section>Total portfolio return is: 248.51% Average yearly return is: 7.59%</section><section><div class="output-image"><div class="out-tag">RESULT:</div><figure class="output-images"><div class="attributed-wrap"><img alt="EMA vs Buy and Hold Strategy" class="img-responsive" height="524" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/EMA_vs_Buy_and_Hold_Strategy.width-1200.png" width="963"></div></figure></div></section><section><div class="headers read-friendly"><h3 id="StratBetter">Which Strategy is Better?</h3></div></section><section><div class="paragraph read-friendly"><div class="rich-text"><p>This is not a simple question for one to answer at this point. When we need to choose between two or more strategies, we need to define a metric (or metrics) based on which to compare them. This very important topic will be covered in the next article.</p><p>In addition, we observe in this last graph that the performance of the two strategies is not constant across time. There are some periods when one outperforms the other and other periods when it is not. So a second question that naturally arises is how do we mitigate the risk to be "tricked" by a good backtesting performance in a given period.</p><p></p><p></p><h3>Continue Learning</h3><ul><li><a href="https://www.learndatasci.com/out/o-python-for-finance-and-trading-algorithms-1/"><b>Python for Financial Analysis and Algorithmic Trading</b> (Udemy)</a><br>Goes over numpy, pandas, matplotlib, Quantopian, ARIMA models, statsmodels, and important metrics, like the Sharpe ratio</li></ul></div></div></section></div><div class="index-wrapper"><div class="sidebar-block newsletter"><div class="newsletter-signup-wrapper"><div id="mc_embed_signup"><h3>Be notified when we release new material</h3><p>Join over 3,500 data science enthusiasts.</p><form action="https://learndatasci.us11.list-manage.com/subscribe/post?u=789c60e0c020546463993f85b&amp;id=f53d7286eb" class="validate" id="mc-embedded-subscribe-form" method="post" name="mc-embedded-subscribe-form" novalidate="" target="_blank"><div id="mc_embed_signup_scroll"><input class="required email" id="mce-EMAIL" name="EMAIL" placeholder="Enter your email" type="email" value=""><div class="clear" id="mce-responses"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div aria-hidden="true" style="position: absolute; left: -5000px;"><input name="b_789c60e0c020546463993f85b_f53d7286eb" tabindex="-1" type="text" value=""></div><input class="button" id="mc-embedded-subscribe" name="subscribe" type="submit" value="Subscribe"></div></form></div></div></div><div class="sidebar-block"><h3>Featured courses:</h3><a href="https://www.learndatasci.com/out/coursera-machine-learning/"><h5>Machine Learning by Andrew Ng, Coursera</h5></a> <a href="https://www.learndatasci.com/out/coursera-Data-Science-Specialization/"><h5>Data Science (R) by Johns Hopkins, Coursera</h5></a> <a href="https://www.learndatasci.com/out/coursera-Applied-Data-Science-with-Python/"><h5>Applied Data Science with Python, Coursera</h5></a> <a href="https://www.learndatasci.com/articles/review-dataquests-data-science-python-program/"><h5>Dataquest</h5></a></div><div class="sidebar-block"><h3>Featured books:</h3><a href="https://www.learndatasci.com/out/amazon-introduction-statistical-learning/"><h5>Introduction to Statistical Learning (ISLR)</h5></a> <a href="https://www.learndatasci.com/out/data-science-from-scratch/"><h5>Data Science from Scratch</h5></a> <a href="https://www.learndatasci.com/out/agile-data-science-20/"><h5>Agile Data Science 2.0</h5></a></div><div class="sidebar-block"><h3>Recent articles:</h3><a href="https://www.learndatasci.com/tutorials/intro-feature-engineering-machine-learning-python/"><h5>Intro to Feature Engineering for Machine Learning With Python</h5></a> <a href="https://www.learndatasci.com/articles/how-get-data-science-education-coursera-plus/"><h5>How to Get a Data Science Education With Coursera Plus</h5></a> <a href="https://www.learndatasci.com/best-machine-learning-courses/"><h5>Top 6 Machine Learning Courses - 2020 Guide &amp; Reviews</h5></a> <a href="https://www.learndatasci.com/best-data-science-online-courses/"><h5>Top 7 Online Data Science Courses for 2020 - Learn Data Science</h5></a></div><div id="IndexStartPos"></div><div id="IndexNav" style="position: fixed; height: calc(100% - 64px); visibility: visible; top: 64px;" class="stuck-nav"><h4>Contents</h4><div class="idx-wrap"><ul><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#MovAveCons" class="active">Moving Average Considerations</a></li><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#MoveAveTradStrat">A Moving Average Trading Strategy</a></li><li class="index-H3"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#FinalCaveat">One Final Caveat</a></li><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#ReturnOfStrat">What is the Total Return of the Strategy?</a></li><li class="index-H2"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#WhatNext">What Next?</a></li><li class="index-H3"><a href="https://www.learndatasci.com/tutorials/python-finance-part-3-moving-average-trading-strategy/#StratBetter">Which Strategy is Better?</a></li></ul></div></div></div></div></div><div id="ArticleFoot"></div><section style="padding-top:0px;"><hr><div class="newsletter-signup-blog in-content-newsletter"><div class="newsletter-signup-wrapper"><div id="mc_embed_signup"><h3>Be notified when we release new material</h3><p>Join over 3,500 data science enthusiasts.</p><form action="https://learndatasci.us11.list-manage.com/subscribe/post?u=789c60e0c020546463993f85b&amp;id=f53d7286eb" class="validate" id="mc-embedded-subscribe-form" method="post" name="mc-embedded-subscribe-form" novalidate="" target="_blank"><div id="mc_embed_signup_scroll"><input class="required email" id="mce-EMAIL" name="EMAIL" placeholder="Enter your email" type="email" value=""><div class="clear" id="mce-responses"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div aria-hidden="true" style="position: absolute; left: -5000px;"><input name="b_789c60e0c020546463993f85b_f53d7286eb" tabindex="-1" type="text" value=""></div><input class="button" id="mc-embedded-subscribe" name="subscribe" type="submit" value="Subscribe"></div></form></div></div></div></section><section class="full-width" id="AuthorDetails"><h3>Meet the Authors</h3><div class="clearfix author-block"><a href="https://www.learndatasci.com/author/georgios" style="text-decoration:none;"><img alt="Georgios_Efstathopoulos.png" class="author-lg-img" height="215" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/Georgios_Efstathopoulos.width-300.png" width="201"></a><div><a href="https://www.learndatasci.com/author/georgios" style="text-decoration:none;"><b class="auth-name">Georgios Efstathopoulos</b></a> <a href="https://www.learndatasci.com/author/georgios" style="text-decoration:none;"><b class="auth-title">Quantitative Analyst</b></a></div><div class="rich-text"><p>PhD in Applied Mathematics and Statistics. Analyst working on quantitative trading, market and credit risk management and behavioral modelling at Barclays Investment Bank. Founder and CEO of QuAnalytics Limited.</p></div></div><div style="display:block;"><div class="editor-block clearfix" style="max-width:700px;margin:0 auto;"></div></div></section><div class="back-to-idx" style="margin-top:60px;"><p><a class="important-link" href="https://www.learndatasci.com/tutorials/">Back to blog index</a></p></div></article><div class="container comments-wrap" style="margin-top:60px;"><div id="disqus_thread"><iframe id="dsq-app249" name="dsq-app249" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 1148px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div></div></div></div><script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://learn-data-sci.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><div class="push"></div><footer class="footer" id="footer"><div class="footer-share"><li class="social-menu-icons"><a alt="GitHub" href="https://github.com/LearnDataSci"><img src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/github-ico.svg" width="30"></a></li><li class="social-menu-icons"><a alt="Twitter" href="http://twitter.com/learndatasci"><img src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/twitter_Gvy5lp8.svg" width="30"></a></li></div><div class="foot-content"><ul class="footer-links"><li><a href="https://www.learndatasci.com/top-udemy-data-science-courses">Best Udemy Data Science Courses</a></li><li><a href="https://www.learndatasci.com/contact-us">Contact</a></li><li><a href="https://www.learndatasci.com/publish">Contribute</a></li></ul><ul class="footer-links"><li><a href="https://www.learndatasci.com/free-data-science-books">100+ Free Data Science Books</a></li><li><a href="https://www.learndatasci.com/privacy-policy">Privacy Policy</a></li></ul></div><div id="FooterFoot">© 2020 LearnDataSci. All rights reserved.<br><br> Use of and/or registration on any portion of this site constitutes acceptance of our <a href="https://www.learndatasci.com/privacy-policy/">Privacy Policy</a>. The material on this site may not be reproduced, distributed, transmitted, cached or otherwise used, except with the prior written permission of <a class="vglnk" href="http://learndatasci.com/" rel="nofollow"><span>LearnDataSci</span><span>.</span><span>com</span></a>.</div></footer><div class="newsletter-signup-wrapper show"><div id="mc_embed_signup"><h3>Be notified when we release new material</h3><p>Join over 3,500 data science enthusiasts.</p><form action="https://learndatasci.us11.list-manage.com/subscribe/post?u=789c60e0c020546463993f85b&amp;id=f53d7286eb" class="validate" id="mc-embedded-subscribe-form" method="post" name="mc-embedded-subscribe-form" novalidate="" target="_blank"><div id="mc_embed_signup_scroll"><input class="required email" id="mce-EMAIL" name="EMAIL" placeholder="Enter your email" type="email" value=""><div class="clear" id="mce-responses"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div aria-hidden="true" style="position: absolute; left: -5000px;"><input name="b_789c60e0c020546463993f85b_f53d7286eb" tabindex="-1" type="text" value=""></div><input class="button" id="mc-embedded-subscribe" name="subscribe" type="submit" value="Subscribe"></div></form></div><div class="exit-news"><span></span><span></span></div></div><link href="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/meisu-light.min.css" rel="stylesheet"><script src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/jquery.min.js.download"></script><script async="true" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/MathJax.js.download"></script><script type="text/x-mathjax-config;executed=true">
MathJax.Hub.Config({
tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: false,


},
displayAlign: "left"
});


    </script><script src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/bootstrap.min.js.download"></script><script src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/main.js.download"></script><script>

        jQuery(function ($) {
            $(document).learnDataSciJS();
        });

</script><script src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/swiper.min.js.download"></script><script>
    jQuery(function ($) {
        $('.swiper-container').each(function (idx, item) {
            var swiper = new Swiper(item, {
                spaceBetween: 2,
                pagination: {
                    el: '.swiper-pagination',
                    type: 'fraction',
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
            });
        })

    });
</script><iframe style="display: none;" src="./Python for Finance, Part 3_ Moving Average Trading Strategy – LearnDataSci_files/saved_resource(1).html"></iframe>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1662374910728860",{em:"insert_email_variable,"});fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1662374910728860&amp;ev=PageView&amp;noscript=1"></noscript>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Size2, sans-serif;"></div></div></body></html>